
running 1 test
Solver: Handle Price Event AX   
Solver: Handle Price Event AZ   
Solver: Handle Book Event AX   
Solver: Handle Price Event AX   
Solver: Handle Book Event AZ   
Solver: Handle Price Event AZ   
Solver: Handle Chain Event CuratorWeigthsSet IX
Solver: Handle Basket Notification BasketAdded IX

Solver: Handle Index Order NewIndexOrder IX ClientOrderId(Order01) < ClientOrderId(Order01) from 0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045
Solver Tick: We sent NewOrderSingle FIX message

Solve...
Engage More Orders...

More Orders...
 * individual_asset_prices > (AZ    p=296.92307)
 * individual_asset_prices > (AX    p=96.66666)

Find Order Liquidity...
   q   quantity
   p   price
   t   threshold
   l   liquidity

 * index order: IX    ClientOrderId(Order01) < ClientOrderId(Order01) Buy p=1005.00000 q=2.50000 t=0.05000

- Find target asset prices and quantites...

 * asset_quantity AX    20.68965 = 8.27586 * 2.50000
 * target_asset_price AX    97.15000 = 96.66666 * 1005.00000 / 1000.00000
 * asset_quantity AZ    1.68393 = 0.67357 * 2.50000
 * target_asset_price AZ    298.40769 = 296.92307 * 1005.00000 / 1000.00000

- Find liquidity for prices with threshold...

 * liquidity >> AX    t=0.05000 l=20.00000
 * asset_total_weighted_liquidity << AX    l=413.79310 q=20.68965

 * liquidity >> AZ    t=0.05000 l=200.00000
 * asset_total_weighted_liquidity << AZ    l=336.78756 q=1.68393


Find Order Contribution...
   q   asset_order_quantity
   tq  asset_total_quantity
   tl  asset_liquidity
   acf asset_contribution_fraction
   alc asset_liquidity_contribution
   of  order_fraction
   oq  order_quantity

 * find_order_contribution: ClientOrderId(Order01) AX    q=20.68965 tq=20.68965 tl=20.00000 acf=1.00000 alc=20.00000 of=0.96666 oq=2.41666
 * find_order_contribution: ClientOrderId(Order01) AZ    q=1.68393 tq=1.68393 tl=200.00000 acf=1.00000 alc=200.00000 of=0.96666 oq=2.41666

Engage Orders...
IndexOrderManager: Engage ClientOrderId(Order01) 2.41666 2.41666 0.08333
Compute...

Send Order Batches...

Solver: Handle Index Order EngageIndexOrder BatchOrderId(Batch01)
Solver Tick: IndexOrderManager responded to EngageOrders

Solve...
Engage More Orders...
Compute...

Send Order Batches...
Sending Batch: Buy AX: 20.00000 @ 97.15000; Buy AZ: 1.62780 @ 298.40769

Solver: Handle Inventory Event OpenLot Buy AX    16.00000 @ 96.66425 + fee 1.54662 (0.100%)
Batch Position: Buy AX    price=20.00000 volley=1943.00000 real=1546.62800 + fee=1.54662
Batch Status: BatchOrderId(Batch01) volley=2428.75000 fill=1554.40000 frac=0.64000 real=1546.62800 fee=1.54662
AX    q=20.00000 p=16.00000 aq=16.00000 cf=1.00000 afr=0.80000
AZ    q=1.62780 p=0.00000 aq=0.00000 cf=1.00000 afr=0.00000
Fill Index Order: ClientOrderId(Order01) 0.00000 (+0.00000 0.000%)

Solver: Handle Inventory Event OpenLot Buy AZ    1.30224 @ 296.91565 + fee 0.38665 (0.100%)
Batch Position: Buy AZ    price=1.62780 volley=485.74999 real=386.65699 + fee=0.38665
Batch Status: BatchOrderId(Batch01) volley=2428.75000 fill=1943.00000 frac=0.80000 real=1933.28500 fee=1.93328
AX    q=20.00000 p=16.00000 aq=16.00000 cf=1.00000 afr=0.80000
AZ    q=1.62780 p=1.30224 aq=1.30224 cf=1.00000 afr=0.80000
Fill Index Order: ClientOrderId(Order01) 1.93333 (+1.93333 80.000%)
IndexOrderManager: Fill: ClientOrderId(Order01) 1.93333 (+1.93333), Remainig Quantity: 0.08333
FIX Response: 0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045 ClientOrderId(Order01) 1.93333 0.56666 2025-05-02 11:37:11.157634 UTC

Solver: Handle Inventory Event OpenLot Buy AX    4.00000 @ 96.95570 + fee 0.38782 (0.100%)
Batch Position: Buy AX    price=20.00000 volley=1943.00000 real=1934.45080 + fee=1.93445
Batch Status: BatchOrderId(Batch01) volley=2428.75000 fill=2331.60000 frac=0.96000 real=2321.10780 fee=2.32110
AX    q=20.00000 p=20.00000 aq=20.00000 cf=1.00000 afr=1.00000
AZ    q=1.62780 p=1.30224 aq=1.30224 cf=1.00000 afr=0.80000
Fill Index Order: ClientOrderId(Order01) 1.93333 (+0.00000 80.000%)

Solver: Handle Inventory Event OpenLot Buy AZ    0.32556 @ 297.81087 + fee 0.09695 (0.100%)
Batch Position: Buy AZ    price=1.62780 volley=485.74999 real=483.61269 + fee=0.48361
Batch Status: BatchOrderId(Batch01) volley=2428.75000 fill=2428.75000 frac=1.00000 real=2418.06350 fee=2.41806
AX    q=20.00000 p=20.00000 aq=20.00000 cf=1.00000 afr=1.00000
AZ    q=1.62780 p=1.62780 aq=1.62780 cf=1.00000 afr=1.00000
Fill Index Order: ClientOrderId(Order01) 2.41666 (+0.48333 100.000%)
IndexOrderManager: Fill: ClientOrderId(Order01) 2.41666 (+0.48333), Remainig Quantity: 0.08333
FIX Response: 0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045 ClientOrderId(Order01) 2.41666 0.08333 2025-05-02 11:37:11.157634 UTC
IndexOrder batch fraction fully filled
Solver Tick: Solver re-inserts IndexOrder from filled batch

Solve...
Engage More Orders...

More Orders...
 * individual_asset_prices > (AZ    p=296.92307)
 * individual_asset_prices > (AX    p=96.66666)

Find Order Liquidity...
   q   quantity
   p   price
   t   threshold
   l   liquidity

 * index order: IX    ClientOrderId(Order01) < ClientOrderId(Order01) Buy p=1005.00000 q=0.08333 t=0.05000

- Find target asset prices and quantites...

 * asset_quantity AX    0.68965 = 8.27586 * 0.08333
 * target_asset_price AX    97.15000 = 96.66666 * 1005.00000 / 1000.00000
 * asset_quantity AZ    0.05613 = 0.67357 * 0.08333
 * target_asset_price AZ    298.40769 = 296.92307 * 1005.00000 / 1000.00000

- Find liquidity for prices with threshold...

 * liquidity >> AX    t=0.05000 l=20.00000
 * asset_total_weighted_liquidity << AX    l=13.79310 q=0.68965

 * liquidity >> AZ    t=0.05000 l=200.00000
 * asset_total_weighted_liquidity << AZ    l=11.22625 q=0.05613


Find Order Contribution...
   q   asset_order_quantity
   tq  asset_total_quantity
   tl  asset_liquidity
   acf asset_contribution_fraction
   alc asset_liquidity_contribution
   of  order_fraction
   oq  order_quantity

 * find_order_contribution: ClientOrderId(Order01) AX    q=0.68965 tq=0.68965 tl=20.00000 acf=1.00000 alc=20.00000 of=1.00000 oq=0.08333
 * find_order_contribution: ClientOrderId(Order01) AZ    q=0.05613 tq=0.05613 tl=200.00000 acf=1.00000 alc=200.00000 of=1.00000 oq=0.08333

Engage Orders...
Should update!
IndexOrderManager: Engage ClientOrderId(Order01) 0.08333 0.08333 0.00000
Compute...

Send Order Batches...

Solver: Handle Index Order EngageIndexOrder BatchOrderId(Batch02)
Solver Tick: Solver sends next batch

Solve...
Engage More Orders...
Compute...

Send Order Batches...
Sending Batch: Buy AX: 0.68965 @ 97.15000; Buy AZ: 0.05613 @ 298.40769

Solver: Handle Inventory Event OpenLot Buy AX    0.55172 @ 96.66425 + fee 0.05333 (0.100%)
Batch Position: Buy AX    price=0.68965 volley=66.99999 real=53.33199 + fee=0.05333
Batch Status: BatchOrderId(Batch02) volley=83.74999 fill=53.59999 frac=0.63999 real=53.33199 fee=0.05333
AX    q=0.68965 p=0.55172 aq=0.55172 cf=1.00000 afr=0.80000
AZ    q=0.05613 p=0.00000 aq=0.00000 cf=1.00000 afr=0.00000
Fill Index Order: ClientOrderId(Order01) 0.00000 (+0.00000 0.000%)

Solver: Handle Inventory Event OpenLot Buy AZ    0.04490 @ 296.91565 + fee 0.01333 (0.100%)
Batch Position: Buy AZ    price=0.05613 volley=16.74999 real=13.33299 + fee=0.01333
Batch Status: BatchOrderId(Batch02) volley=83.74999 fill=66.99999 frac=0.80000 real=66.66499 fee=0.06666
AX    q=0.68965 p=0.55172 aq=0.55172 cf=1.00000 afr=0.80000
AZ    q=0.05613 p=0.04490 aq=0.04490 cf=1.00000 afr=0.80000
Fill Index Order: ClientOrderId(Order01) 0.06666 (+0.06666 80.000%)
IndexOrderManager: Fill: ClientOrderId(Order01) 2.48333 (+0.06666), Remainig Quantity: 0.00000
FIX Response: 0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045 ClientOrderId(Order01) 2.48333 0.01666 2025-05-02 11:37:11.158484 UTC

Solver: Handle Inventory Event OpenLot Buy AX    0.13793 @ 96.95570 + fee 0.01337 (0.100%)
Batch Position: Buy AX    price=0.68965 volley=66.99999 real=66.70519 + fee=0.06670
Batch Status: BatchOrderId(Batch02) volley=83.74999 fill=80.39999 frac=0.96000 real=80.03819 fee=0.08003
AX    q=0.68965 p=0.68965 aq=0.68965 cf=1.00000 afr=1.00000
AZ    q=0.05613 p=0.04490 aq=0.04490 cf=1.00000 afr=0.80000
Fill Index Order: ClientOrderId(Order01) 0.06666 (+0.00000 80.000%)

Solver: Handle Inventory Event OpenLot Buy AZ    0.01122 @ 297.81087 + fee 0.00334 (0.100%)
Batch Position: Buy AZ    price=0.05613 volley=16.74999 real=16.67629 + fee=0.01667
Batch Status: BatchOrderId(Batch02) volley=83.74999 fill=83.74999 frac=1.00000 real=83.38149 fee=0.08338
AX    q=0.68965 p=0.68965 aq=0.68965 cf=1.00000 afr=1.00000
AZ    q=0.05613 p=0.05613 aq=0.05613 cf=1.00000 afr=1.00000
Fill Index Order: ClientOrderId(Order01) 0.08333 (+0.01666 100.000%)
IndexOrderManager: Fill: ClientOrderId(Order01) 2.50000 (+0.01666), Remainig Quantity: 0.00000
FIX Response: 0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045 ClientOrderId(Order01) 2.50000 0.00000 2025-05-02 11:37:11.158484 UTC
IndexOrder batch fraction fully filled
Scenario completed.
test solver::solver::test::sbe_solver ... ok

test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 28 filtered out; finished in 0.01s

